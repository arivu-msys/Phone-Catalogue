<section class="summary-card mb-4">
  <div class="d-flex justify-content-between align-items-center mb-2">
    <h2 class="summary-card__title mb-0">Order Summary</h2>
    <span class="summary-card__items">{{ cartCount$ | async }} Items</span>
  </div>

  <hr class="my-2" />

  <div *ngFor="let item of (cartItems$ | async); let last = last" class="summary-item d-flex mb-3">
    <div class="summary-item__thumb me-3">
      <div class="thumb-inner">
        <img [src]="item.imageUrl" alt="{{ item.title }}" />
      </div>
    </div>
    <div class="flex-grow-1">
      <div class="summary-item__name">{{ item.title }}</div>
      <div class="summary-item__meta">
        Color: Black / Silver
      </div>
      <div class="summary-item__price">
        {{ item.quantity }} Ã— {{ item.dealPrice| currency: 'USD':'symbol' }}
      </div>
    </div>
  </div>

  <hr class="my-3" />

  <div class="promo-card mb-3">
    <div class="input-group">
      <input
        type="text"
        class="form-control promo-input"
        placeholder="Promo Code"
    [(ngModel)]="promoCode"
      />
      <button class="btn btn-link promo-apply" type="button" (click)="onApplyPromo()">
        Apply
      </button>
    </div>
  </div>

  <div *ngIf="promoError" class="text-danger small mb-2">{{ promoError }}</div>

  <div class="summary-row">
    <span>Subtotal</span>
    <span>{{ cartTotal$ | async | currency: 'USD':'symbol' }}</span>
  </div>
  <div class="summary-row">
    <span>Shipping</span>
    <span>{{ (cartPricing$ | async)?.shippingPrice | currency: 'USD':'symbol' }}</span>
  </div>
  <div class="summary-row mb-2">
    <span>Tax</span>
    <span>{{ (cartPricing$ | async)?.tax | currency: 'USD':'symbol' }}</span>
  </div>
  <div class="summary-row mb-2">
    <span>Discount</span>
    <span>
      {{ ((discount$ | async) ?? 0) > 0 ? (((discount$ | async) ?? 0) | currency: 'USD':'symbol') : '-' }}
    </span>
  </div>

  <hr class="my-3" />

  <div class="summary-row summary-row--total">
    <span class="summary-total-label">Total</span>
    <span class="summary-total-amount">{{ finalTotal$ | async | currency: 'USD':'symbol' }}</span>
  </div>
</section>

