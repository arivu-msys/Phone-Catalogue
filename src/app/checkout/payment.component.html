<section class="payment-card mb-4">
  <div class="payment-card__header d-flex align-items-center">
    <div class="step-indicator d-flex align-items-center justify-content-center me-3">
      <span>3</span>
    </div>
    <h2 class="payment-card__title mb-0">Payment Method</h2>
  </div>

  <hr class="my-3" />

  <!-- Payment method selector -->
  <div class="row g-3 mb-4">
    <div class="col-md-4">
      <button
        type="button"
        class="payment-method w-100"
        [class.payment-method--active]="selectedMethod === 'card'"
        (click)="setMethod('card')"
      >
        <div class="payment-method__icon payment-method__icon--card mb-2">
          <span class="icon-line"></span>
          <span class="icon-dots"></span>
        </div>
        <div class="payment-method__label">Credit / Debit Card</div>
      </button>
    </div>

    <div class="col-md-4">
      <button
        type="button"
        class="payment-method w-100"
        [class.payment-method--active]="selectedMethod === 'paypal'"
        (click)="setMethod('paypal')"
      >
        <div class="payment-method__icon payment-method__icon--paypal mb-2">
          <span class="paypal-p">P</span>
        </div>
        <div class="payment-method__label">PayPal</div>
      </button>
    </div>

    <div class="col-md-4">
      <button
        type="button"
        class="payment-method w-100"
        [class.payment-method--active]="selectedMethod === 'applePay'"
        (click)="setMethod('applePay')"
      >
        <div class="payment-method__icon payment-method__icon--apple mb-2">
          <span class="apple-shape">ï£¿</span>
        </div>
        <div class="payment-method__label">Apple Pay</div>
      </button>
    </div>
  </div>

  <!-- Card form when card is selected -->
  <form *ngIf="isCardSelected()" [formGroup]="paymentForm" novalidate>
    <div class="mb-3">
      <label class="form-label" for="cardNumber">Card Number</label>
      <div class="input-group">
        <input
          id="cardNumber"
          type="text"
          class="form-control payment-input"
          placeholder="1234 5678 9012 3456"
          formControlName="cardNumber"
          [(ngModel)]="payment.cardNumber"
        />
        <span class="input-group-text payment-input__addon">
          <span class="icon-card"></span>
        </span>
      </div>
    </div>

    <div class="row g-3">
      <div class="col-md-6">
        <label class="form-label" for="expiry">Expiration Date</label>
        <input
          id="expiry"
          type="text"
          class="form-control payment-input"
          placeholder="MM/YY"
          formControlName="expiry"
          [(ngModel)]="payment.expiry"
        />
      </div>
      <div class="col-md-6">
        <label class="form-label" for="cvv">Security Code (CVV)</label>
        <div class="input-group">
          <input
            id="cvv"
            type="text"
            class="form-control payment-input"
            placeholder="123"
            formControlName="cvv"
            [(ngModel)]="payment.cvv"
          />
          <span class="input-group-text payment-input__addon">
            <span class="icon-help">?</span>
          </span>
        </div>
      </div>
    </div>

    <div class="mt-3">
      <label class="form-label" for="nameOnCard">Name on Card</label>
      <input
        id="nameOnCard"
        type="text"
        class="form-control payment-input"
        placeholder="John Doe"
        formControlName="nameOnCard"
        [(ngModel)]="payment.nameOnCard"
      />
    </div>
  </form>

  <!-- Message for non-card methods -->
  <div *ngIf="!isCardSelected()" class="mt-3 non-card-message">
    <p class="mb-0" *ngIf="selectedMethod === 'paypal'">
      You will be prompted to authorize payment with PayPal.
    </p>
    <p class="mb-0" *ngIf="selectedMethod === 'applePay'">
      You will be prompted to authorize payment with Apple Pay.
    </p>
  </div>
</section>

