<div class="cart-list">
  <div *ngIf="(cartItems$ | async) as items">
    <div *ngIf="items.length; else empty">
      <div *ngFor="let it of items" class="cart-item d-flex align-items-center mb-3">
        <!-- Product column -->
        <div class="d-flex align-items-center" style="flex:1">
          <img [src]="it.imageUrl ? '/' + it.imageUrl : '/img/phones/placeholder.png'" class="item-img" alt="" />
          <div class="ms-3">
            <div class="title">{{ it.title }}</div>
            <div class="small text-muted">{{ '' }}</div>
            <div class="mt-2">
              <button class="btn btn-sm btn-link text-danger p-0 remove-btn" (click)="remove(it.productId)" [attr.aria-label]="'Remove'">
                <i class="bi bi-trash" [attr.aria-hidden]="true"></i>
              </button>
            </div>
          </div>
        </div>

        <!-- Price column -->
        <div class="price-col text-center" style="width:110px">
          <div class="deal-price">₹{{ it.dealPrice }}</div>
        </div>

        <!-- Quantity column -->
        <div class="qty-col text-center" style="width:140px">
          <div class="qty-pill d-inline-flex align-items-center">
            <button class="qty-btn" [disabled]="it.quantity<=1" (click)="changeQuantity(it.productId, it.quantity-1)">−</button>
            <div class="qty-value">{{ it.quantity }}</div>
            <button class="qty-btn" (click)="changeQuantity(it.productId, it.quantity+1)">+</button>
          </div>
        </div>

        <!-- Total column -->
        <div class="total-col text-end" style="width:100px">
          <div class="item-total">₹{{ (it.dealPrice * it.quantity) | number:'1.0-0' }}</div>
        </div>
      </div>
    </div>
    <ng-template #empty>
      <div class="alert alert-info">Your cart is empty</div>
    </ng-template>
  </div>
</div>
